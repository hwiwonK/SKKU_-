<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1><%= title %></h1>
    <p>Welcome to <%= title %></p>

    <a href="/upload"><button type="button" class="btn btn-primary btn-lg">upload file</button></a>

    <!--폴더 생성 버튼-->
    <button type = "button" id="btn_folder_new" onclick="createFolder()">폴더 추가</button>

    
    
    <table border="1px">
      <tr>
        <td><a href="/file">전체 폴더</a></td>
      <% for(let folder of folders) { %>
          <td width><a href="/file?folderId=<%= folder.id %>"><%= folder.foldername %></a></td>
      <% } %>
      </tr>
    </table>

    <!-- 파일 목록 보여주기 -->

    <table border="1px">
      <% for(let file of files) { %>
        <tr>
          <td><a href="<%=file.fileurl%>"><%=file.filename %></a></td>
          <!-- <td width="20%"><%=file.createdAt %></td> -->
          <td><%=file.id%></td>
          <% for(let keyword of file.keywords) { %>
            <td><%=keyword.keywordname%></td>
          <% } %>
          <td width><a href="/file/delete?fileId=<%= file.id %>"><button type="button" class="btn btn-primary btn-lg">X</button></a></td>
        </tr>
      <% } %>
    </table>



    <form action="/file/search" method="post">
      <input type="text" name="query" placeholder="키워드를 입력하세요.">
      <input type="submit" value="Search" >
    </form>

    

    <script>

      const {folder} = require('../models');
      var folderName = "";

      function createFolder(){
        console.log("button click");

        try{ //ok 버튼 클릭
          folderName = prompt("폴더의 이름을 입력해주세요", "무제");
          console.log(folderName);

        } catch(error){ //cancel 버튼 클릭
            console.log('Canceled');
        }

        //폴더 생성 프로세스 시작
        window.location.replace("/file/folder?foldername=" + folderName);

      }

    </script>


    <!-- <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script> -->
		<!-- <script src="../public/javascripts/file.js"></script> -->
  </body>
</html>
